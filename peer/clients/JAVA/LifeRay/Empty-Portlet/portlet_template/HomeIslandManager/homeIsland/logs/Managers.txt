           	
	   private bool _loadedLabels = false;	
MulitMap buttonLabels;
           
           _graphicsManager = new VerticalFieldManager(Manager.NO_VERTICAL_SCROLL | Manager.NO_VERTICAL_SCROLLBAR )
            {            
                public void paint(Graphics graphics)
                {
                    graphics.clear();
                    int tmpColor;
                    boolean drewBackground = false;
                    boolean drewTextbox = false;
                    
                    // paint custom graphics
                    if(_applicationIsRunning)
                    {
                        if(_debug)
                        {
                            //System.out.println("[graphicsMan-INFO] applcation is now running");
                        }
                                                   
                        try
                        {
                            if(_islandApplicationManager != null)
                            {
                                if(_debug)
                                {
                                    //System.out.println("[graphicsMan-INFO] appMan is not null");
                                }
                
                                if(_islandApplicationManager.ApplicationEngine!=null)
                                {
                                    if(_islandApplicationManager.ApplicationEngine.HasGraphics()&&
                                        (_islandApplicationManager.ApplicationEngine.GetGraphicObjects()!=null)&&
                                        (_islandApplicationManager.ApplicationEngine.GetEngineState() == islandSoftwareEngine.APP_ENGINE_STARTED))
                                    {
                                        // clear what we have so far
                                        //graphics.clear();
                                        
                                        if(_debug)
                                        {
                                            
                                            if(_componentsManager !=null)
                                            {
                                                if(_rtf.getManager() == _componentsManager)
                                                {
                                                    if(!_rtf.getText().equals(""))
                                                    {
                                                        //_componentsManager.delete(_rtf);
                                                        _rtf.setText("");
                                                        //_componentsManager.invalidate();
                                                    }       
                                                    //System.out.println("[INFO] reset the _rtf OK");
                                                }
                                            }
                                        }
                                        
                                        if(_debug)
                                        {
                                            //System.out.println("[graphicsMan-INFO] about to enter graphics loop");
                                        }
                                        
                                        // Get Loaded/Current Grid
                                        //Vector appGrids = _islandApplicationManager.ApplicationEngine.GetDisplayGrids();
                                        
                                        //for(Enumeration enu = appGrids.elements(); enu.hasMoreElements();)
                                        if(!_islandApplicationManager.currentGrid.equals(""))
                                        {
                                            //islandSoftwareEngine.DisplayLayoutDetails appGridDetails = (islandSoftwareEngine.DisplayLayoutDetails) enu.nextElement();
                                            //islandSoftwareEngine.DisplayLayoutDetails appGridDetails = (islandSoftwareEngine.DisplayLayoutDetails) _islandApplicationManager.ApplicationEngine.GetDisplayGridFromName(_islandApplicationManager.currentGrid);
                                            //islandSoftwareEngine.GridScreenDetails appGridDetails = (islandSoftwareEngine.GridScreenDetails) enu.nextElement();
                                            islandSoftwareEngine.GridScreenDetails appGridDetails = (islandSoftwareEngine.GridScreenDetails) _islandApplicationManager.ApplicationEngine.GetDisplayGridFromName(_islandApplicationManager.currentGrid);
                                            
                                            // set th grid color
                                            graphics.setColor(appGridDetails.GridColor);
                                            
                                            if(!drewBackground)
                                            {
                                                if(_debug)
                                                {
                                                    if(appGridDetails.GridColor ==Color.BLACK)
                                                    {
                                                        System.out.println("[INFO]The layout color here is: Black");
                                                    }
                                                        
                                                    if(appGridDetails.GridColor == Color.WHITE)
                                                    {
                                                        System.out.println("[INFO]The layout color here is: White");
                                                    }
                                                }
                                                // paint the grid background area
                                                //graphics.drawRect(appGridDetails.GetGridOriginX(), appGridDetails.GetGridOriginY(), appGridDetails.GetGridWidth(),appGridDetails.GetGridHeight());
                                                graphics.fillRect(appGridDetails.GetGridOriginX(), appGridDetails.GetGridOriginY(), appGridDetails.GetGridWidth(),appGridDetails.GetGridHeight());
                                                drewBackground = true;
                                            }

                                            if(_debug)
                                            {
                                                System.out.println("[INFO] this is the current screen name:"+appGridDetails.ScreenName);
                                                System.out.println("[INFO] this is the grid width:"+appGridDetails.GetGridWidth());
                                                System.out.println("[INFO] this is the grid height:"+appGridDetails.GetGridHeight());
                                                
                                            }  
                                            
                                            // Get Loaded Layouts for Screen
                                            //Vector appLayouts = appGridDetails.GetGridLayouts();
                                            Enumeration appLayouts = appGridDetails.GetScreenLayouts(appGridDetails.ScreenName);
                                            
                                            for(Enumeration en = appLayouts; en.hasMoreElements();)
                                            {
                                                //Vector appGraphics = _islandApplicationManager.ApplicationEngine.GetGraphicObjects();
                                                islandSoftwareEngine.DisplayLayoutDetails appLayoutDetails = (islandSoftwareEngine.DisplayLayoutDetails) en.nextElement();
                                                
                                                if(_debug)
                                                {
                                                    System.out.println("[INFO] this is the current layout name:"+appLayoutDetails.Name);
                                                
                                                    System.out.println("[INFO] this is the current layout details placementX&placementY:"+appLayoutDetails.GetPlacementX()+"&"+appLayoutDetails.GetPlacementY());
                                                
                                                    System.out.println("[INFO] this is the layout height and wdth:"+appLayoutDetails.LayoutHeight+"&"+appLayoutDetails.LayoutWidth);
                                                }                

                                                // Layout value conversion
                                                Double dLPx = new Double(appLayoutDetails.GetPlacementX());
                                                Double dLPy = new Double(appLayoutDetails.GetPlacementY());
                                                Double dLPw = new Double(appLayoutDetails.LayoutWidth);
                                                Double dLPh = new Double(appLayoutDetails.LayoutHeight);
                                                
                                                // get Loaded Graphics
                                                Vector appGraphics = appLayoutDetails.GetLayoutGraphics();
                                                
                                                // set the layout color
                                                graphics.setColor(appLayoutDetails.LayoutColor);
                                            
                                                if(_debug)
                                                {
                                                    if(appLayoutDetails.LayoutColor ==Color.BLACK)
                                                    {
                                                        System.out.println("[INFO]The layout color here is: Black");
                                                    }
                                                    
                                                    if(appLayoutDetails.LayoutColor == Color.WHITE)
                                                    {
                                                        System.out.println("[INFO]The layout color here is: White");
                                                    }
                                                }
                                                // paint the grid background area
                                                //graphics.drawRect(appLayoutDetails.LayoutPlacementX, appLayoutDetails.LayoutPlacementY, appLayoutDetails.LayoutWidth,appLayoutDetails.LayoutHeight);

                                                // fil the layout background area
                                                if(graphics.getColor()==Color.WHITE)
                                                    graphics.fillRect(dLPx.intValue(), dLPy.intValue(), dLPw.intValue(),dLPh.intValue());
                                                
                                                // enumerate object container (GuiGraphicDetails)
                                                for(Enumeration e = appGraphics.elements(); e.hasMoreElements();)
                                                {
                                                    // paint graphics
                                                    islandSoftwareEngine.GraphicGuiDetails appGraphicDetails = (islandSoftwareEngine.GraphicGuiDetails) e.nextElement();
                                                    
                                                    if(appGraphicDetails !=null)
                                                    {
                                                        
                                                        // Graphic value conversion
                                                        Double dPx = new Double(appGraphicDetails.PlacementX());
                                                        Double dPy = new Double(appGraphicDetails.PlacementY());
                                                        Double dLx = new Double(appGraphicDetails.LocationX());
                                                        Double dLy = new Double(appGraphicDetails.LocationY());
                                                        
                                                        if(appGraphicDetails.GraphicsObject instanceof Bitmap)
                                                        {
                                                            Bitmap bmp = (Bitmap) appGraphicDetails.GraphicsObject;
                                                            
                                                            
                                                            if(bmp!=null)
                                                            {
                                                                if(_debug)
                                                                {
                                                                    System.out.println("[INFO] this is the current details name:"+appGraphicDetails.Name);
                                                                    
                                                                    if(appGraphicDetails.Location!=null)
                                                                    {
                                                                        System.out.println("[INFO] this is the current details locationX&locationY:"+appGraphicDetails.LocationX()+"&"+appGraphicDetails.LocationY());
                                                                    }
                                                                    
                                                                    if(appGraphicDetails.Placement!=null)
                                                                    {
                                                                        System.out.println("[INFO] this is the current details placementX&placementY:"+appGraphicDetails.PlacementX()+"&"+appGraphicDetails.PlacementY());
                                                                    }
                                                                }
                                                                    
                                                                if(appGraphicDetails.Name.equals("Background_Image"))
                                                                {   
                                                                    if(_debug)
                                                                    {
                                                                        System.out.println("[ERROR] Trying to Draw a Background Image!!!");
                                                                    }
                                                                    /*
                                                                    if((appGraphicDetails.Location!=null)&&(appGraphicDetails.Placement!=null))
                                                                    {
                                                                        if(appGraphicDetails.Event == null)
                                                                        {
                                                                            appGraphicDetails.Event = "";
                                                                        }
                                                                            
                                                                        if(!appGraphicDetails.Event.equals("Removal"))
                                                                        {
                                                                            
                                                                            graphics.drawBitmap(dPx.intValue(),dPy.intValue(),bmp.getWidth(),bmp.getHeight(),bmp, dLx.intValue(),dLy.intValue());
                                                                        
                                                                            if(appGraphicDetails.HasText)
                                                                            {
                                                                                if(_debug)
                                                                                {
                                                                                    System.out.println("[INFO] Graphic Has Text!");
                                                                                    
                                                                                    if(graphics.getColor()==Color.BLACK)
                                                                                    {
                                                                                        System.out.println("[INFO] Current Graphic Color is: BLACK");
                                                                                    }
                                                                                    
                                                                                    if(graphics.getColor()==Color.WHITE)
                                                                                    {
                                                                                        System.out.println("[INFO] Current Graphic Color is: WHITE");
                                                                                    }
                                                                                    
                                                                                    if(appGraphicDetails.ObjectColor==Color.BLACK)
                                                                                    {
                                                                                        System.out.println("[INFO] Current Graphic Object Color is: BLACK");
                                                                                    }
                                                                                        
                                                                                    if(appGraphicDetails.ObjectColor==Color.WHITE)
                                                                                    {
                                                                                        System.out.println("[INFO] Current Graphic Object Color is: WHITE");
                                                                                    } 
                                                                                }
                                                                                
                                                                                tmpColor = graphics.getColor();
                                                                                
                                                                                graphics.setColor(appGraphicDetails.ObjectColor);
                                            
                                                                                graphics.drawText(appGraphicDetails.ObjectText, dPx.intValue(),dPy.intValue());
                                                                            
                                                                                graphics.setColor(tmpColor);
                                                                            }
                                                                            else
                                                                            {
                                                                                if(_debug)
                                                                                {
                                                                                    System.out.println("[INFO] Graphic Has No Text");
                                                                                    
                                                                                }
                                                                            }
                                                                        }
                                                                        
                                                                        if(_componentsManager !=null)
                                                                        {
                                                                            //_componentsManager.invalidate();
                                                                        }
                                                                    }
                                                                    */
                                                                }
                                                                else
                                                                {
                                                                    // Not a Background Image
                                                                    if((appGraphicDetails.Location!=null)&&(appGraphicDetails.Placement!=null))
                                                                    {
                                                                        if(appGraphicDetails.Event == null)
                                                                        {
                                                                            appGraphicDetails.Event = "";
                                                                        }
                                                                        
                                                                        if(!appGraphicDetails.Event.equals("Removal"))
                                                                        {
                                                                            if(_debug)
                                                                            {
                                                                                System.out.println("[INFO] img width and height:"+bmp.getWidth()+"&"+ bmp.getHeight());
                                                                                System.out.println("[INFO] appGraphicDetails width and height:"+appGraphicDetails.width+"&"+ appGraphicDetails.height);
                                                                            }
                                                                            
                                                                            //Now we draw the bitmap:
                                                                            int useThisWidth = ((int) (appGraphicDetails.width + 0.5F)) - 2;
                                                                            int useThisHeight = ((int) (appGraphicDetails.height + 0.5F)) - 2;
                                                                            int textHCenter = ((int) ((useThisWidth / 2) +  + 0.5F)) + dPx.intValue();
                                                                            int textVCenter = ((int) ((useThisHeight / 2) + 0.5F)) + dPy.intValue();
                                                                                
                                                                            //Before drawing the bitmap, we need to create a new sized image to match our placement box:
                                                                            Bitmap sizedMap = islandSoftwareEngine.resizeBitmap(bmp,useThisWidth,useThisHeight);
                                                                            
                                                                            graphics.drawBitmap(dPx.intValue(),dPy.intValue(),useThisWidth,useThisHeight,sizedMap, dLx.intValue(),dLy.intValue());
                                                                            
                                                                            if(!_loadedLabels)
                                                                            {
                                                                                //We also add our coordinates into the labels Multimap:
                                                                                if(buttonLabels == null)
                                                                                    buttonLabels = new MultiMap();
                                                                                    
                                                                                buttonLabels.add(appGraphicDetails.Name,dPx.toString() + "|" + dPy.toString() + "|" + String.valueOf(useThisWidth)); 
                                                                            }

                                                                            //Next we add text if warranted:
                                                                            if(appGraphicDetails.HasText)
                                                                            {
                                                                                String thisText =  appGraphicDetails.ObjectText.replace('\n',' ').trim();
                                                                                
                                                                                if(_debug)
                                                                                {
                                                                                    System.out.println("[TOLA] The Graphic Text is: " + thisText);
                                                                                    System.out.println("[TOLA] The X,Y for this button is: " + String.valueOf(dPx) + "," + String.valueOf(dPy));
                                                                                    if(appGraphicDetails.ObjectColor==Color.BLACK)
                                                                                    {
                                                                                        System.out.println("[INFO] Current Graphic Object Color is: BLACK");
                                                                                    }
                                                                                    
                                                                                    if(appGraphicDetails.ObjectColor==Color.WHITE)
                                                                                    {
                                                                                        System.out.println("[INFO] Current Graphic Object Color is: WHITE");
                                                                                    } 
                                                                                }
                                                                                
                                                                                Font newFont = Font.getDefault().derive(Font.BOLD,((int) ((useThisHeight / 2) + 0.5F)));
                                                                                graphics.setColor(Color.WHITE);
                                                                                graphics.setFont(newFont);
                                                                                
                                                                                if(thisText.indexOf("\\u") > -1)
                                                                                {
                                                                                    try
                                                                                    {
                                                                                        if(_debug)
                                                                                        {
                                                                                            System.out.println("Base Value to be converted: "+ thisText);
                                                                                        }
                                                                                        
                                                                                        String newValue = "";
                                                                                        String convertValue = thisText.substring(thisText.indexOf("\\u")+2,thisText.indexOf(";"));
                                                                                        //We need to convert the value to unicode
                                                                                        short valueAsShort = Short.parseShort(convertValue.trim(),16);
                                                                                        newValue = String.valueOf((char)valueAsShort);
                                                                                        
                                                                                        while(thisText.length() > thisText.indexOf(";")+1)
                                                                                        {
                                                                                            thisText = thisText.substring(thisText.indexOf(";") + 1);
                                                                                            convertValue = thisText.substring(thisText.indexOf("\\u")+2,thisText.indexOf(";"));
                                                                                            //We need to convert the value to unicode
                                                                                            valueAsShort = Short.parseShort(convertValue.trim(),16);
                                                                                            newValue += String.valueOf((char)valueAsShort);
                                                                                        }
                                                                                        
                                                                                        if(_debug)
                                                                                        {
                                                                                            System.out.println("Converted Value: "+ newValue);
                                                                                        }
                                                                                        graphics.drawText(newValue, dPx.intValue(),textVCenter,DrawStyle.HCENTER | DrawStyle.VCENTER, useThisWidth);
                                                                                    }
                                                                                    catch(Exception exU)
                                                                                    {
                                                                                        if(_debug)
                                                                                        {
                                                                                            System.out.println("[ERROR] Converting to Unicode failed: "+exU.toString());
                                                                                            exU.printStackTrace();
                                                                                        }
                                                                                    }
                                                                                }
                                                                                else
                                                                                {                                                                               
                                                                                    graphics.drawText(thisText, dPx.intValue(),textVCenter,DrawStyle.HCENTER | DrawStyle.VCENTER, useThisWidth);
                                                                                }
                                                                                if(_debug)
                                                                                {
                                                                                    if(graphics.getColor()==Color.BLACK)
                                                                                    {
                                                                                        System.out.println("[INFO] Wrote out text in BLACK");
                                                                                    }
                                                                                    
                                                                                    if(graphics.getColor()==Color.WHITE)
                                                                                    {
                                                                                        System.out.println("[INFO] Wrote out text in WHITE");
                                                                                    } 
                                                                                    System.out.println("[INFO] Text Coordinates (X,Y): " + textHCenter + "," + textVCenter);
                                                                                }
                                                                            }
                                                                            else
                                                                            {
                                                                                if(_debug)
                                                                                {
                                                                                    System.out.println("[INFO] Graphic Has No Text");
                                                                                    
                                                                                }
                                                                            }
                                                                            bmp = null;
                                                                        }

                                                                        
                                                                        if(_componentsManager !=null)
                                                                        {
                                                                            //_componentsManager.invalidate();
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                        else
                                        {
                                            Vector appGraphics = _islandApplicationManager.ApplicationEngine.GetGraphicObjects();
                                            
                                             if(_debug)
                                            {
                                                System.out.println("[INFO] Drawing a Vector Graphic");
                                            }
                                            // enumerate object container (GuiGraphicDetails)
                                                for(Enumeration e = appGraphics.elements(); e.hasMoreElements();)
                                                {
                                                    // paint graphics
                                                    islandSoftwareEngine.GraphicGuiDetails appGraphicDetails = (islandSoftwareEngine.GraphicGuiDetails) e.nextElement();
                                                    
                                                    if(appGraphicDetails !=null)
                                                    {
                                                        // Graphic conversion values
                                                        Double dPx = new Double(appGraphicDetails.PlacementX());
                                                        Double dPy = new Double(appGraphicDetails.PlacementY());
                                                        Double dLx = new Double(appGraphicDetails.LocationX());
                                                        Double dLy = new Double(appGraphicDetails.LocationY());
                                                        
                                                        if(appGraphicDetails.GraphicsObject instanceof Bitmap)
                                                        {
                                                            Bitmap bmp = (Bitmap) appGraphicDetails.GraphicsObject;
                                                            
                                                            if(_debug)
                                                            {
                                                                System.out.println("[INFO] this is the current details name:"+appGraphicDetails.Name);
                                                                
                                                                if(appGraphicDetails.Location!=null)
                                                                {
                                                                    System.out.println("[INFO] this is the current details locationX&locationY:"+appGraphicDetails.LocationX()+"&"+appGraphicDetails.LocationY());
                                                                }
                                                                
                                                                if(appGraphicDetails.Placement!=null)
                                                                {
                                                                    System.out.println("[INFO] this is the current details placementX&placementY:"+appGraphicDetails.PlacementX()+"&"+appGraphicDetails.PlacementY());
                                                                    
                                                                }
                                                            }
                                                            
                                                            // Background Background_Image
                                                            if(appGraphicDetails.Name.equals("Background_Image"))
                                                            {   
                                                                if((appGraphicDetails.Location!=null)&&(appGraphicDetails.Placement!=null))
                                                                {
                                                                    if(appGraphicDetails.Event == null)
                                                                    {
                                                                        appGraphicDetails.Event = "";
                                                                    }
                                                                        
                                                                    if(!appGraphicDetails.Event.equals("Removal"))
                                                                    {
                                                                        
                                                                        graphics.drawBitmap(dPx.intValue(),dPy.intValue(),bmp.getWidth(),bmp.getHeight(),bmp, dLx.intValue(),dLy.intValue());
                                                                    
                                                                        if(appGraphicDetails.HasText)
                                                                        {
                                                                            if(_debug)
                                                                            {
                                                                                System.out.println("[INFO] Graphic has text!");
                                                                            }
                                                                            //graphics.setColor(appGraphicDetails.ObjectColor);
                                                                            
                                                                            graphics.drawText(appGraphicDetails.ObjectText, dPx.intValue(),dPy.intValue());
                                                                        }
                                                                    }
                                                                    
                                                                    if(_componentsManager !=null)
                                                                    {
                                                                        //_componentsManager.invalidate();
                                                                    }
                                                                }
                                                            }
                                                            else
                                                            {
                                                                //! "Background_Image"
                                                                {   
                                                                    if((appGraphicDetails.Location!=null)&&(appGraphicDetails.Placement!=null))
                                                                    {
                                                                        if(appGraphicDetails.Event == null)
                                                                        {
                                                                            appGraphicDetails.Event = "";
                                                                        }
                                                                        
                                                                        if(!appGraphicDetails.Event.equals("Removal"))
                                                                        {
                                                                            
                                                                            graphics.drawBitmap(dPx.intValue(),dPy.intValue(),bmp.getWidth(),bmp.getHeight(),bmp, dLx.intValue(),dLy.intValue());
                                                                        
                                                                            if(appGraphicDetails.HasText)
                                                                            {
                                                                                if(_debug)
                                                                                {
                                                                                    System.out.println("[INFO] Graphic Has Text!!");
                                                                                }
                                                                                //graphics.setColor(appGraphicDetails.ObjectColor);
                                                                                
                                                                                graphics.drawText(appGraphicDetails.ObjectText, dPx.intValue(),dPy.intValue());
                                                                            }
                                                                        }
                                                                        
                                                                        if(_componentsManager !=null)
                                                                        {
                                                                            //_componentsManager.invalidate();
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                                
                                        }
                                    }
                                }
                            }
                        }
                        catch(Exception e)
                        {
                            if(_debug)
                            {
                                System.out.println("[ERROR] problems painting using the graphics manager:"+e.toString());
                                e.printStackTrace();
                            }
                        }
                    }                        
                    
                    // paint components etc
                    super.paint(graphics);                           
                }            
            };
            
            //| USE_ALL_WIDTH | VERTICAL_SCROLL | VERTICAL_SCROLLBAR 
            _componentsManager = new VerticalFieldManager(USE_ALL_WIDTH | USE_ALL_HEIGHT )
            {
                public void paint(Graphics graphics)
                {
                    //super.paint(graphics);
                    // initialize tracker
                    if(_componentObjectStack == null)
                    {
                        _componentObjectStack = new Stack();
                    }
                    
                    if(_applicationIsRunning)
                    {
                        try
                        {
                            if(_islandApplicationManager != null)
                            {
                                
                                if(_islandApplicationManager.ApplicationEngine!=null)
                                {
                                
                                    if(_islandApplicationManager.ApplicationEngine.HasComponents()&&
                                        (_islandApplicationManager.ApplicationEngine.GetComponentObjects()!=null))
                                    {
                                        // clear what we have so far
                                        //graphics.clear(); blanks everything on this manager
                                        //this.deleteAll(); // blanks almost everything
                                        
                                        if(!_islandApplicationManager.currentGrid.equals(""))
                                        {
                                            //islandSoftwareEngine.DisplayLayoutDetails appGridDetails = (islandSoftwareEngine.DisplayLayoutDetails) enu.nextElement();
                                            //islandSoftwareEngine.DisplayLayoutDetails appGridDetails = (islandSoftwareEngine.DisplayLayoutDetails) _islandApplicationManager.ApplicationEngine.GetDisplayGridFromName(_islandApplicationManager.currentGrid);
                                            //islandSoftwareEngine.GridScreenDetails appGridDetails = (islandSoftwareEngine.GridScreenDetails) enu.nextElement();
                                            islandSoftwareEngine.GridScreenDetails appGridDetails = (islandSoftwareEngine.GridScreenDetails) _islandApplicationManager.ApplicationEngine.GetDisplayGridFromName(_islandApplicationManager.currentGrid);
                                            
                                            // set th grid color
                                            //graphics.setColor(appGridDetails.GridColor);
                                            
                                            // paint the grid background area
                                            //graphics.drawRect(appGridDetails.GetGridOriginX(), appGridDetails.GetGridOriginY(), appGridDetails.GetGridWidth(),appGridDetails.GetGridHeight());

                                           
                                            // fil the grid background area
                                            //graphics.fillRect(appGridDetails.GetGridOriginX(), appGridDetails.GetGridOriginY(), appGridDetails.GetGridWidth(),appGridDetails.GetGridHeight());

                                            // Get Loaded Layouts for Screen
                                            //Vector appLayouts = appGridDetails.GetGridLayouts();
                                            Enumeration appLayouts = appGridDetails.GetScreenLayouts(appGridDetails.ScreenName);
                                            
                                            for(Enumeration en = appLayouts; en.hasMoreElements();)
                                            {
                                                //Vector appGraphics = _islandApplicationManager.ApplicationEngine.GetGraphicObjects();
                                                islandSoftwareEngine.DisplayLayoutDetails appLayoutDetails = (islandSoftwareEngine.DisplayLayoutDetails) en.nextElement();
                                            
                                                //appComponents = (Vector) appLayoutDetails.GetLayoutComponents();
                                            
                                                // enumerate object container (GuiGraphicDetails)
                                                for(Enumeration e = appLayoutDetails.GetLayoutComponents().elements(); e.hasMoreElements();)
                                                {
                                                    // paint graphics
                                                    islandSoftwareEngine.GraphicGuiDetails appComponentDetails = (islandSoftwareEngine.GraphicGuiDetails) e.nextElement();
                                                    
                                                    if(appComponentDetails !=null)
                                                    {
                                                        
                                                        Double dcPx = new Double(appComponentDetails.PlacementX());
                                                        Double dcPy = new Double(appComponentDetails.PlacementY());
                                                        Double dcLx = new Double(appComponentDetails.LocationX());
                                                        Double dcLy = new Double(appComponentDetails.LocationY());
                                                            
                                                        if(_debug)
                                                        {
                                                            System.out.println("[INFO] this is the current details name:"+appComponentDetails.Name);
                                                                    
                                                            if(appComponentDetails.Location!=null)
                                                            {
                                                                System.out.println("[INFO] this is the current details locationX&locationY:"+appComponentDetails.LocationX()+"&"+appComponentDetails.LocationY());
                                                            }
                                                                    
                                                            if(appComponentDetails.Placement!=null)
                                                            {
                                                                System.out.println("[INFO] this is the current details placementX&placementY:"+appComponentDetails.PlacementX()+"&"+appComponentDetails.PlacementY());
                                                            }
                                                        }    
                                                                            
                                                        if(appComponentDetails.ComponentsObject instanceof BasicEditField)
                                                        {
                                                            
                                                            
                                                            BasicEditField bef = (BasicEditField) appComponentDetails.ComponentsObject;
                                                            SeparatorField sf = new SeparatorField();
                                                             
                                                            if(_debug)
                                                            {
                                                                if(appComponentDetails.ObjectColor == Color.BLACK)
                                                                {
                                                                    System.out.println("[INFO] component color is BLACK");
                                                                }
                                                                
                                                                if(appComponentDetails.ObjectColor == Color.WHITE)
                                                                {
                                                                    System.out.println("[INFO] component color is WHITE");
                                                                }
                                                            }
                                                                        
                                                            if(appComponentDetails.ObjectColor!=Color.BLACK)
                                                            {
                                                                // Set the color
                                                                //graphics.setColor(appComponentDetails.ObjectColor);
                                                            }
                                                            
                                                            if((appComponentDetails.height>0)||(appComponentDetails.width>0))
                                                            {
                                                                //if(appComponentDetails.height>0)
                                                                {
                                                                    //bef.
                                                                    //net.rim.device.api.ui.Field f = (Field)bef;
                                                                    //graphics.setExtent(appComponentDetails.width, appComponentDetails.height);
                                                                }
                                                            }
        
                                                            if(appComponentDetails.Event == null)
                                                            {
                                                                appComponentDetails.Event = "";
                                                            }
                                                                        
                                                            if(!appComponentDetails.Event.equals("Removal"))
                                                            {
                                                                if(appComponentDetails.Events == null)
                                                                {
                                                                    appComponentDetails.Events = new Stack();
                                                                }
                                                                
                                                                if((!appComponentDetails.Events.contains("Draw_Precise"))&&
                                                                    (!appComponentDetails.Events.contains("Draw:Precise")))
                                                                { 
                                                                    if(!_componentObjectStack.contains(bef))
                                                                    {
                                                                        //if(!bef.getText().equals(""))
                                                                        {
                                                                            _componentObjectStack.addElement(bef);
                                                                            ///add(bef);    
                                                                            
                                                                            _componentObjectStack.addElement(sf);
                                                                            ///add(sf);
                                                                        }
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    if(_componentObjectStack.contains(bef))
                                                                    {
                                                                        //if(!bef.getText().equals(""))
                                                                        {
                                                                            _componentObjectStack.removeElement(bef);
                                                                            delete(bef);
                                                                            
                                                                            _componentObjectStack.removeElement(sf);
                                                                            delete(sf);
                                                                    
                                                                        }
                                                                }
                                                                    
                                                                    //graphics.drawText(bef.getText(),dcPx.intValue(),dcPy.intValue());
                                                                }
                                                            }
                                                            
                                                            if(appComponentDetails.Event.equals("Removal"))
                                                            {
                                                                if(_componentObjectStack.contains(bef))
                                                                {
                                                                    if(!bef.getText().equals(""))
                                                                    {
                                                                        //_componentObjectStack.removeElement(bef);
                                                                        //_componentObjectStack.removeElement(sf);
                                                                
                                                                        //delete(bef);
                                                                        //delete(sf);
                                                                        bef.setText("");
                                                                    }
                                                                }
                                                            }
                                                        
                                                            if(_debug)
                                                            {
                                                                //System.out.println("[INFO] this is the current details name:"+appComponentDetails.Name);
                                                                //System.out.println("[INFO] this is the current details placement:"+appComponentDetails.Placement);
                                                                //System.out.println("[INFO] this is the current details location:"+appComponentDetails.Location);
                                                                //System.out.println("[INFO] this is the current details color:"+appComponentDetails.ObjectColor);
                                                            }
                                                        }
                                                        
                                                        if(appComponentDetails.ComponentsObject instanceof RichTextField)
                                                        {
                                                            RichTextField rtf = (RichTextField) appComponentDetails.ComponentsObject;
                                                            SeparatorField sf = new SeparatorField();
                                                            
                                                            if(_debug)
                                                            {
                                                                if(appComponentDetails.ObjectColor == Color.BLACK)
                                                                {
                                                                    System.out.println("[INFO] component color is BLACK");
                                                                }
                                                                
                                                                if(appComponentDetails.ObjectColor == Color.WHITE)
                                                                {
                                                                    System.out.println("[INFO] component color is WHITE");
                                                                }
                                                            }
                                                                    
                                                            if(appComponentDetails.ObjectColor!=Color.BLACK)
                                                            {
                                                                // Set the color
                                                                ///graphics.setColor(appComponentDetails.ObjectColor);
                                                            }
                                                            
                                                            if(appComponentDetails.Event == null)
                                                            {
                                                                appComponentDetails.Event = "";
                                                            }
                                                                        
                                                            if(!appComponentDetails.Event.equals("Removal"))
                                                            {
                                                                if(appComponentDetails.Events == null)
                                                                {
                                                                    appComponentDetails.Events = new Stack();
                                                                }
                                                                
                                                                if((!appComponentDetails.Events.contains("Draw_Precise"))&&
                                                                    (!appComponentDetails.Events.contains("Draw:Precise")))
                                                                {    
                                                                    if(!_componentObjectStack.contains(rtf))
                                                                    {
                                                                        //if(rtf.getText().equals(""))
                                                                        {
                                                                            _componentObjectStack.addElement(rtf);
                                                                            //add(rtf);    
                                                                            ///insert(rtf,1);
                                                                            
                                                                            if(!rtf.getText().equals(""))
                                                                            {
                                                                                _componentObjectStack.addElement(sf);
                                                                                ///insert(sf,2);
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    if(_componentObjectStack.contains(rtf))
                                                                    {
                                                                        //if(rtf.getText().equals(""))
                                                                        {
                                                                            _componentObjectStack.removeElement(rtf);
                                                                            //_componentObjectStack.removeElement(sf);
                                                                    
                                                                            delete(rtf);
                                                                            //delete(sf);
                                                                        }
                                                                    }
                                                                    
                                                                    //graphics.drawText(rtf.getText(),dcPx.intValue(),dcPy.intValue());
                                                                }
                                                            }  
                                                            
                                                            if(appComponentDetails.Event.equals("Removal"))
                                                            {
                                                                if(_componentObjectStack.contains(rtf))
                                                                {
                                                                    if(!rtf.getText().equals(""))
                                                                    {
                                                                        
                                                                        //delete(sf);
                                                                        rtf.setText("");
                                                                        //_componentObjectStack.removeElement(rtf);
                                                                        //delete(rtf);
                                                                        
                                                                        //_componentObjectStack.removeElement(sf);
                                                                        //delete(sf);
                                                                    }
                                                                }
                                                            }
                                                            
                                                            if(_debug)
                                                            {
                                                                //System.out.println("[INFO] this is the current details name:"+appComponentDetails.Name);
                                                                //System.out.println("[INFO] this is the current details placement:"+appComponentDetails.Placement);
                                                                //System.out.println("[INFO] this is the current details location:"+appComponentDetails.Location);
                                                                //System.out.println("[INFO] this is the current details color:"+appComponentDetails.ObjectColor);
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                        else
                                        {
                                            // get Loaded Components
                                            Vector appComponents = _islandApplicationManager.ApplicationEngine.GetComponentObjects();
                                            
                                            // enumerate object container (GuiGraphicDetails)
                                            for(Enumeration e = appComponents.elements(); e.hasMoreElements();)
                                            {
                                                // paint graphics
                                                islandSoftwareEngine.GraphicGuiDetails appComponentDetails = (islandSoftwareEngine.GraphicGuiDetails) e.nextElement();
                                                
                                                if(appComponentDetails !=null)
                                                {
                                                    
                                                    Double dcPx = new Double(appComponentDetails.PlacementX());
                                                    Double dcPy = new Double(appComponentDetails.PlacementY());
                                                    Double dcLx = new Double(appComponentDetails.LocationX());
                                                    Double dcLy = new Double(appComponentDetails.LocationY());
                                                                            
                                                    if(appComponentDetails.ComponentsObject instanceof BasicEditField)
                                                    {
                                                        
                                                        BasicEditField bef = (BasicEditField) appComponentDetails.ComponentsObject;
                                                        SeparatorField sf = new SeparatorField();
                                                        
                                                        if(_debug)
                                                        {
                                                            if(appComponentDetails.ObjectColor == Color.BLACK)
                                                            {
                                                                System.out.println("[INFO] component color is BLACK");
                                                            }
                                                            
                                                            if(appComponentDetails.ObjectColor == Color.WHITE)
                                                            {
                                                                System.out.println("[INFO] component color is WHITE");
                                                            }
                                                        }
                                                                    
                                                        if(appComponentDetails.ObjectColor!=Color.BLACK)
                                                        {
                                                            // Set the color
                                                            graphics.setColor(appComponentDetails.ObjectColor);
                                                        }
                                                        
                                                        if((appComponentDetails.height>0)||(appComponentDetails.width>0))
                                                        {
                                                            //if(appComponentDetails.height>0)
                                                            {
                                                                //bef.
                                                                //net.rim.device.api.ui.Field f = (Field)bef;
                                                                //graphics.setExtent(appComponentDetails.width, appComponentDetails.height);
                                                            }
                                                        }
    
                                                        if(appComponentDetails.Event == null)
                                                        {
                                                            appComponentDetails.Event = "";
                                                        }
                                                                    
                                                        if(!appComponentDetails.Event.equals("Removal"))
                                                        {
                                                            if(appComponentDetails.Events == null)
                                                            {
                                                                appComponentDetails.Events = new Stack();
                                                            }
                                                            
                                                            if((!appComponentDetails.Events.contains("Draw_Precise"))&&
                                                                (!appComponentDetails.Events.contains("Draw:Precise")))
                                                            { 
                                                                if(!_componentObjectStack.contains(bef))
                                                                {
                                                                    //if(!bef.getText().equals(""))
                                                                    {
                                                                        _componentObjectStack.addElement(bef);
                                                                        add(bef);    
                                                                        
                                                                        _componentObjectStack.addElement(sf);
                                                                        add(sf);
                                                                    }
                                                                }
                                                            }
                                                            else
                                                            {
                                                                if(_componentObjectStack.contains(bef))
                                                                {
                                                                    //if(!bef.getText().equals(""))
                                                                    {
                                                                        _componentObjectStack.removeElement(bef);
                                                                        delete(bef);
                                                                        
                                                                        _componentObjectStack.removeElement(sf);
                                                                        delete(sf);
                                                                
                                                                    }
                                                            }
                                                                
                                                                graphics.drawText(bef.getText(),dcPx.intValue(),dcPy.intValue());
                                                            }
                                                        }
                                                        
                                                        if(appComponentDetails.Event.equals("Removal"))
                                                        {
                                                            if(_componentObjectStack.contains(bef))
                                                            {
                                                                if(!bef.getText().equals(""))
                                                                {
                                                                    //_componentObjectStack.removeElement(bef);
                                                                    //_componentObjectStack.removeElement(sf);
                                                            
                                                                    //delete(bef);
                                                                    //delete(sf);
                                                                    bef.setText("");
                                                                }
                                                            }
                                                        }
                                                    
                                                        if(_debug)
                                                        {
                                                            //System.out.println("[INFO] this is the current details name:"+appComponentDetails.Name);
                                                            //System.out.println("[INFO] this is the current details placement:"+appComponentDetails.Placement);
                                                            //System.out.println("[INFO] this is the current details location:"+appComponentDetails.Location);
                                                            //System.out.println("[INFO] this is the current details color:"+appComponentDetails.ObjectColor);
                                                        }
                                                    }
                                                    
                                                    if(appComponentDetails.ComponentsObject instanceof RichTextField)
                                                    {
                                                        RichTextField rtf = (RichTextField) appComponentDetails.ComponentsObject;
                                                        SeparatorField sf = new SeparatorField();
                                                        
                                                        if(_debug)
                                                        {
                                                            if(appComponentDetails.ObjectColor == Color.BLACK)
                                                            {
                                                                System.out.println("[INFO] component color is BLACK");
                                                            }
                                                            
                                                            if(appComponentDetails.ObjectColor == Color.WHITE)
                                                            {
                                                                System.out.println("[INFO] component color is WHITE");
                                                            }
                                                        }
                                                        
                                                        if(appComponentDetails.ObjectColor!=Color.BLACK)
                                                        {
                                                            // Set the color
                                                            graphics.setColor(appComponentDetails.ObjectColor);
                                                        }
                                                        
                                                        if(appComponentDetails.Event == null)
                                                        {
                                                            appComponentDetails.Event = "";
                                                        }
                                                                    
                                                        if(!appComponentDetails.Event.equals("Removal"))
                                                        {
                                                            if(appComponentDetails.Events == null)
                                                            {
                                                                appComponentDetails.Events = new Stack();
                                                            }
                                                            
                                                            if((!appComponentDetails.Events.contains("Draw_Precise"))&&
                                                                (!appComponentDetails.Events.contains("Draw:Precise")))
                                                            {    
                                                                if(!_componentObjectStack.contains(rtf))
                                                                {
                                                                    //if(rtf.getText().equals(""))
                                                                    {
                                                                        _componentObjectStack.addElement(rtf);
                                                                        //add(rtf);    
                                                                        insert(rtf,1);
                                                                        
                                                                        if(!rtf.getText().equals(""))
                                                                        {
                                                                            _componentObjectStack.addElement(sf);
                                                                            insert(sf,2);
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                            else
                                                            {
                                                                if(_componentObjectStack.contains(rtf))
                                                                {
                                                                    //if(rtf.getText().equals(""))
                                                                    {
                                                                        _componentObjectStack.removeElement(rtf);
                                                                        //_componentObjectStack.removeElement(sf);
                                                                
                                                                        delete(rtf);
                                                                        //delete(sf);
                                                                    }
                                                                }
                                                                
                                                                graphics.drawText(rtf.getText(),dcPx.intValue(),dcPy.intValue());
                                                            }
                                                        }  
                                                        
                                                        if(appComponentDetails.Event.equals("Removal"))
                                                        {
                                                            if(_componentObjectStack.contains(rtf))
                                                            {
                                                                if(!rtf.getText().equals(""))
                                                                {
                                                                    
                                                                    //delete(sf);
                                                                    rtf.setText("");
                                                                    //_componentObjectStack.removeElement(rtf);
                                                                    //delete(rtf);
                                                                    
                                                                    //_componentObjectStack.removeElement(sf);
                                                                    //delete(sf);
                                                                }
                                                            }
                                                        }
                                                        
                                                        if(_debug)
                                                        {
                                                            //System.out.println("[INFO] this is the current details name:"+appComponentDetails.Name);
                                                            //System.out.println("[INFO] this is the current details placement:"+appComponentDetails.Placement);
                                                            //System.out.println("[INFO] this is the current details location:"+appComponentDetails.Location);
                                                            //System.out.println("[INFO] this is the current details color:"+appComponentDetails.ObjectColor);
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                    if(buttonLabels != null && !buttonLabels.isEmpty() && !_loadedLabels)
                                    {
                                        //We need to draw labels over our buttons - to do so, we need to create a series of managers to handle our layout:
                                        RichTextField buttonField;
                                        String theseValues;
                                        double xCoord;
                                        double yCoord;
                                        double thisWidth;
                                        double SixButtonWidth = this.getWidth() / 6;
                                        double firstRowHeight = (this.getVisibleHeight() / 12) * 2;  //For Row 2
                                        String buttonSpaces = "";
                                        Font newFont;
                                        int fontWidth;
                                        
                                        HorizontalFieldManager modeManager = new HorizontalFieldManager(HorizontalFieldManager.FIELD_LEFT);
                                        //modeManager.setHorizontalQuantization(
                                        HorizontalFieldManager topButtons = new HorizontalFieldManager(HorizontalFieldManager.FIELD_RIGHT);
                                        HorizontalFieldManager sixButtons = new HorizontalFieldManager(HorizontalFieldManager.USE_ALL_WIDTH);
                                        //sixButtons.
                                        HorizontalFieldManager fiveButtons = new HorizontalFieldManager(HorizontalFieldManager.USE_ALL_WIDTH);
                                        
                                        for(Enumeration e = buttonLabels.elements(); e.hasMoreElements();)
                                        {
                                            theseValues = (String) e.nextElement();
                                            if(_debug)
                                            {
                                                System.out.println("[LABEL PRINT] Printing the values: " + theseValues);
                                            }
                                            xCoord = Double.parseDouble(theseValues.substring(0,theseValues.indexOf("|")));
                                            theseValues = theseValues.substring(theseValues.indexOf('|') + 1);
                                            yCoord = Double.parseDouble(theseValues.substring(0,theseValues.indexOf("|")));
                                            thisWidth =  Double.parseDouble(theseValues.substring(theseValues.indexOf('|') + 1));
                                            if(_debug)
                                            {
                                                System.out.println("[LABEL PRINT] X: " + xCoord);
                                                System.out.println("[LABEL PRINT] Y: " + yCoord);
                                                System.out.println("[LABEL PRINT] Width: " + thisWidth);
                                            }
                                            
                                            //Now we set our spaces correctly:
                                            fontWidth = Font.getDefault().getAdvance(' ');
                                            fontWidth = (int) ((thisWidth / fontWidth) +  + 0.5F);
                                            if(_debug)
                                            {
                                                System.out.println("[LABEL PRINT] The button label should be " + fontWidth + " spaces long");
                                            }
                                            buttonSpaces = "";
                                            while(fontWidth >= 0)
                                            {
                                                buttonSpaces += "X";
                                                fontWidth -= 1;
                                            }
                                            
                                            if(_debug)
                                            {
                                                System.out.println("[LABEL PRINT] Button Sapce: |" + buttonSpaces + "|");
                                            }
                                            
                                            //Next we create the field
                                            buttonField = new RichTextField(buttonSpaces,RichTextField.FOCUSABLE|RichTextField.READONLY|RichTextField.FIELD_VCENTER|RichTextField.FIELD_HCENTER);
                                            
                                            //Now we place our textbox in the correct manager:
                                            if(yCoord <= firstRowHeight && yCoord > 0)
                                            {
                                                //This is a top row button:
                                                if(xCoord == 0)
                                                {
                                                    //This is the Mode button
                                                    if(_debug)
                                                    {
                                                        System.out.println("[LABEL PRINT] Adding in the Mode button");
                                                    }
                                                    modeManager.add(buttonField);
                                                }
                                                else
                                                {
                                                    //This is a top row button
                                                    if(_debug)
                                                    {
                                                        System.out.println("[LABEL PRINT] Adding a Top Row button");
                                                    }
                                                    topButtons.add(buttonField);
                                                }
                                            }
                                            else
                                            {
                                                if(thisWidth > SixButtonWidth)
                                                {
                                                    //This is a 5 button row addition
                                                    if(_debug)
                                                    {
                                                        System.out.println("[LABEL PRINT] Adding to the 5 Button Row");
                                                    }
                                                    fiveButtons.add(buttonField);
                                                }
                                                else
                                                 {
                                                    //This is a 6 button row addition
                                                    if(_debug)
                                                    {
                                                        System.out.println("[LABEL PRINT] Adding to the 6 Button Row");
                                                    }
                                                    sixButtons.add(buttonField);
                                                }
                                            }
                                        }
                                        //Now that all of the button labels have been added, we add the managers to the overall layout
                                        //NOTE: The order determines placement...
                                        _componentsManager.add(modeManager);
                                        _componentsManager.add(topButtons);
                                        _componentsManager.add(sixButtons);
                                        _componentsManager.add(fiveButtons);
                                        _loadedLabels = true;
                                    }
                                }
                            }
                        }
                        catch(Exception ex)
                        {
                            if(_debug)
                            {
                                System.out.println("[ERROR] problems painting using the components manager:"+ex.toString());
                                ex.printStackTrace();
                            }
                        }
                    }                            
                    super.paint(graphics);
                 } 
                
                
                public void navigationClick()
                {
                    if(_debug)
                    {
                        System.out.println("[INFO] component screen nav clicked");
                    }
                }
            };
